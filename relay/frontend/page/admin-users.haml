-extends "base.haml"
-set page="Users"

-block head
	%script(type="application/javascript" src="/static/user.js" nonce="{{view.request['hash']}}")

-block content
	%details.section
		%summary << Add User
		#add-item
			%label(for="new-username") << Username
			%input(id="new-username" name="username" placeholder="Username")

			%label(for="new-password") << Password
			%input(id="new-password" type="password" placeholder="Password")

			%label(for="new-password2") << Password Again
			%input(id="new-password2" type="password" placeholder="Password Again")

			%label(for="new-handle") << Handle
			%input(id="new-handle" type="email" placeholder="handle")

		%input(type="button" value="Add User" onclick="add_user()")

	%fieldset.section
		%legend << Users

		.data-table
			%table#users
				%thead
					%tr
						%td.username << Username
						%td.handle << Handle
						%td.date << Joined
						%td.remove

				%tbody
					-for user in users
						%tr(id="{{user.username}}")
							%td.username
								=user.username

							%td.handle
								=user.handle or "n/a"

							%td.date
								=user.created.strftime("%Y-%m-%d")

							%td.remove
								%a(href="#" onclick="del_user('{{user.username}}')" title="Remove User") << &#10006;
