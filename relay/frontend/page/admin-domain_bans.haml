-extends "base.haml"
-set page="Domain Bans"

-block head
	%script(type="application/javascript" src="/static/domain_ban.js" nonce="{{view.request['hash']}}", defer)

-block content
	%details.section
		%summary << Ban Domain
		#add-item
			%label(for="new-domain") << Domain
			%input(type="domain" id="new-domain" name="domain" placeholder="Domain")

			%label(for="new-reason") << Ban Reason
			%textarea(id="new-reason" name="new") << {{""}}

			%label(for="new-note") << Admin Note
			%textarea(id="new-note" name="note") << {{""}}

		%input(type="button" value="Ban Domain" onclick="ban();")

	%fieldset.section
		%legend << Domain Bans

		.data-table
			%table#table
				%thead
					%tr
						%td.domain << Domain
						%td << Date
						%td.remove

				%tbody
					-for ban in bans
						%tr(id="{{ban.domain}}")
							%td.domain
								%details
									%summary -> =ban.domain

									.grid-2col
										.reason << Reason
										%textarea.reason(id="{{ban.domain}}-reason" name="reason") << {{ban.reason or ""}}

										.note << Note
										%textarea.note(id="{{ban.domain}}-note" name="note") << {{ban.note or ""}}

									%input(type="button" value="Update" onclick="update_ban('{{ban.domain}}')")

							%td.date
								=ban.created.strftime("%Y-%m-%d")

							%td.remove
								%a(href="#", onclick="unban('{{ban.domain}}')" title="Unban domain") << &#10006;
